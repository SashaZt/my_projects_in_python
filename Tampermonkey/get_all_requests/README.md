# üì¶ Tampermonkey-—Å–∫—Ä–∏–ø—Ç: Capture and Save All Requests

## üìù –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞

1. –ù–∞–∂–º–∏—Ç–µ –∏–∫–æ–Ω–∫—É Tampermonkey ‚Üí  **–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç** .
2. –í—Å—Ç–∞–≤—å—Ç–µ –∫–æ–¥ —Å–∫—Ä–∏–ø—Ç–∞ (artifact_id: requests.js, –≤–µ—Ä—Å–∏—è `0.7`) –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä, –∑–∞–º–µ–Ω–∏–≤ —à–∞–±–ª–æ–Ω–Ω—ã–π –∫–æ–¥.
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç (Ctrl+S –∏–ª–∏ **File** ‚Üí  **Save** ).
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–∫—Ä–∏–ø—Ç –≤–∫–ª—é—á–µ–Ω (–∑–µ–ª–µ–Ω—ã–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤ ¬´–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è¬ª).

---

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞

### –ó–∞–ø—É—Å–∫ –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å–∞–π—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, [https://salescenter.allegro.com](https://salescenter.allegro.com/)).
2. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12 ‚Üí  **Console** ).
3. –ï—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è, –≤–≤–µ–¥–∏—Ç–µ `allow pasting` –∏ –Ω–∞–∂–º–∏—Ç–µ Enter.
4. –í–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:

```javascript
start_script()
```

–°–∫—Ä–∏–ø—Ç –Ω–∞—á–Ω—ë—Ç –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—Ç—å –≤—Å–µ —Å–µ—Ç–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã. –ü–µ—Ä–µ—Ö–≤–∞—Ç –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –¥–∞–∂–µ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

### –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π

–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ –ª—é–±—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –Ω–∞ —Å–∞–π—Ç–µ: –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º, –ø–µ—Ä–µ—Ö–æ–¥—ã, —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞–º–ø–∞–Ω–∏–π –∏ —Ç.–¥.

–ó–∞–ø—Ä–æ—Å—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `localStorage`:

* –ú–µ—Ç–æ–¥ (POST, GET –∏ —Ç.–¥.)
* URL
* –ó–∞–≥–æ–ª–æ–≤–∫–∏
* –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞
* Query-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã
* –í—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —ç–∫—Å–ø–æ—Ä—Ç

–ö–æ–≥–¥–∞ –∑–∞–∫–æ–Ω—á–∏—Ç–µ:

```javascript
stop_script()
```

–°–∫—Ä–∏–ø—Ç —Å—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç JSON-—Ñ–∞–π–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä, `network_requests_2025-05-06T12-34-56Z.json`) –∏ —Å–∫–∞—á–∞–µ—Ç –µ–≥–æ –≤ –ø–∞–ø–∫—É –∑–∞–≥—Ä—É–∑–æ–∫.

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

```javascript
viewSavedRequests()
```

### –û—á–∏—Å—Ç–∫–∞ –±–µ–∑ —ç–∫—Å–ø–æ—Ä—Ç–∞

```javascript
clearSavedRequests()
```

---

## üåê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–æ–≤

–°–∫—Ä–∏–ø—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞:

```text
https://salescenter.allegro.com/*
https://edge.salescenter.allegro.com/*
```

–ß—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å:

1. Tampermonkey ‚Üí –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç ‚Üí  **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å** .
2. –ò–∑–º–µ–Ω–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏ `@match`. –ü—Ä–∏–º–µ—Ä—ã:

```javascript
// @match        https://example.com/*
// @match        https://*.example.com/*
// @match        https://example.com/api/*
```

3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (Ctrl+S).

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–∏–ø–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤

–ß—Ç–æ–±—ã –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –ø–µ—Ä–µ—Ö–≤–∞—Ç —Ç–æ–ª—å–∫–æ `POST` –∏ `GET`:

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä —Å–∫—Ä–∏–ø—Ç–∞.
2. –ù–∞–π–¥–∏—Ç–µ `saveRequest` –∏ –¥–æ–±–∞–≤—å—Ç–µ —Ñ–∏–ª—å—Ç—Ä:

```javascript
if (!['POST', 'GET'].includes(requestData.method.toUpperCase())) return;
```

---

## üß© –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ URL

```javascript
if (!requestData.url.includes('/api/')) return;
```

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫—É–∫

```javascript
requestData.cookies = document.cookie;
```

### –ó–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è fetch:

```javascript
headers: init.headers ? Object.fromEntries(new Headers(init.headers)) : { 'Accept': 'application/json' },
```

### –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV:

```javascript
window.exportSavedRequests = function() {
  ...
  // CSV –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
};
```

### –í–∫–ª—é—á–µ–Ω–∏–µ –ª–æ–≥–æ–≤:

```javascript
console.log('–ó–∞–ø—Ä–æ—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω:', requestData);
```

### –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞:

–£–¥–∞–ª–∏—Ç–µ:

```javascript
if (isCapturing) {
    window.start_script();
}
```

---

## üñ•Ô∏è –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–µ –¥–æ–º–µ–Ω—ã

```text
https://salescenter.allegro.com/*
https://edge.salescenter.allegro.com/*
```

–î–æ–±–∞–≤—å—Ç–µ –¥—Ä—É–≥–∏–µ —á–µ—Ä–µ–∑ –¥–∏—Ä–µ–∫—Ç–∏–≤—É `@match` –≤ –±–ª–æ–∫–µ `// ==UserScript==`.

---

## üì° –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º—ã–µ –∑–∞–ø—Ä–æ—Å—ã

* POST
* GET
* PUT
* DELETE
* –∏ –¥—Ä—É–≥–∏–µ –º–µ—Ç–æ–¥—ã

–°–∫—Ä–∏–ø—Ç –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —á–µ—Ä–µ–∑:

* `fetch`
* `XMLHttpRequest`
* —Ñ–æ—Ä–º—ã (`form`)

---

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í—ã –º–æ–∂–µ—Ç–µ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –ø–æ–¥ —Å–≤–æ–∏ –∑–∞–¥–∞—á–∏, –≤ —Ç–æ–º —á–∏—Å–ª–µ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ–º–µ–Ω—ã, –º–µ—Ç–æ–¥—ã –∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ endpoint'—ã.
